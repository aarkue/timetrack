<ion-card>
  <ion-card-header>
    <ion-card-title>Pomodoro</ion-card-title>
    <ion-card-subtitle
      >{{ this.status?.toString() }} {{(this.status.toString() == 'Work')? '('+pomodoros+')' : ''}}
      {{ this.isPaused ? "- Paused" : "" }}</ion-card-subtitle
    >
  </ion-card-header>
  <ion-card-content>
    <h1 class="status-big" [style]="isPaused ? 'color: dimgray' : ''">
      {{ this.status?.toString() }}
    </h1>
    <h1 *ngIf="showSeconds" [ngClass]="{'overtime': this.isOvertime}">
      {{this.getMinLeft() | number: "1.0-0"}} min {{this.getSecLeft() | number: "1.0-0"}} sec
    </h1>
    <h1 *ngIf="!showSeconds" [ngClass]="{'overtime': this.isOvertime}">
      {{
        (currDuration - timePassed) / 60 -
          ((currDuration - timePassed) % 60) / 60 | number: "1.0-0"
      }}
      min
    </h1>
    <ion-button expand="block" size="large"
      
      [color]="this.isPaused ? 'primary' : (this.status?.toString() === 'Break'? 'success' : 'secondary')"
      [fill]="this.isPaused ? 'solid' : 'solid'"
      (click)="buttonClick()"
      mode="ios"
    >
      {{ this.isPaused ? "Resume" : (this.isOvertime ? 'Finish' : 'Pause') }}
    </ion-button>
    <ion-progress-bar *ngIf="showProgressBar"
    [value]="this.isOvertime ? '0.9' : (this.timePassed / this.currDuration)"
    [ngClass]="this.status?.toString() === 'Break' ? 'onBreak' : 'working'" 
    [buffer]="this.isOvertime ? '0.1' : '1'"
    ></ion-progress-bar>

  </ion-card-content>
  <app-svg-clock mat-card-image [isDown]="!isPaused"></app-svg-clock>
  <div>
    <ion-button mode="ios" size="small" color="danger" (click)="clear()">Clear</ion-button>
    <ion-button mode="ios" size="small"(click)="showOptions()" color="tertiary">Options</ion-button>
    <ion-button mode="ios" size="small" class="right-button" (click)="nextTimer()">Skip</ion-button>
  </div>
</ion-card>

<div id="pomodoroHistory">
  <ion-item><h2>History</h2></ion-item>
<ion-chip *ngFor="let el of timerHistory;" (click)="showHistoryInfo(el)" [color]="el.type.toString() === 'Break' ? 'success' : 'primary'" [outline]="el.endDate != null" [ngStyle]="{width: (el.duration/(10*60))*50+80+'px'}">
  <ion-label class="chipLabel" [color]="el.endDate ? '' : 'dark'"><b>{{el.duration/60 | number: "1.1-2"}}</b> <br><i>{{getDurationDifferenceMin(el)}}</i></ion-label>
  <ion-icon name="timer-outline" [color]="el.endDate ? '' : 'dark'"></ion-icon>
  <ion-progress-bar *ngIf="showProgressBar && !el.endDate " class="chipProgress"
  [value]="(this.timePassed / this.currDuration)"
  [color]="el.type.toString() === 'Break' ? 'success' : 'secondary'"
  ></ion-progress-bar>
</ion-chip>
<br>
<div class="centered">
  <ion-button class="centered" fill="outline" size="small" color="danger"  mode="ios" (click)="this.deleteHistory()">
  Delete History
  </ion-button>
</div>
</div>